# CSV薪資資料上傳功能使用指南

## 功能概述

GoalPay支援CSV檔案上傳個人薪資資料，讓您可以快速導入自己的薪資記錄。此功能專為個人使用者設計，每次上傳包含單一員工（您自己）的薪資資料。

> **未來規劃**：GoalPay將與企業薪資系統整合，透過API直接接收企業的薪資資料，屆時企業可以批量上傳所有員工的薪資資料。

## 使用步驟

### 1. 下載CSV範本

1. 進入上傳頁面
2. 點擊「CSV 批量上傳」按鈕
3. 點擊「下載CSV範本」按鈕
4. 系統會下載一個包含個人薪資單範例的CSV檔案

### 2. 準備CSV檔案

CSV檔案應包含以下欄位（按順序），**每行代表一個月的薪資單**：

| 欄位名稱 | 說明 | 範例 |
|---------|------|------|
| 公司名稱 | 您所屬的公司名稱 | 測試科技公司 |
| 員工編號 | 您的員工編號 | EMP001 |
| 員工姓名 | 您的姓名 | 張小明 |
| 部門 | 您所屬的部門 | 研發部 |
| 薪資日期 | 薪資單日期 (YYYY-MM-DD) | 2024-06-30 |
| 工作天數 | 當月工作天數 | 22 |
| 缺勤天數 | 當月缺勤天數 | 0 |
| 有薪假天數 | 當月有薪假天數 | 0 |
| 無薪假天數 | 當月無薪假天數 | 0 |
| 基本薪資 | 基本薪資金額 | 400000 |
| 津貼 | 津貼金額 | 20000 |
| 總薪資 | 總薪資金額 | 420000 |
| 扣除額 | 總扣除金額 | 85000 |
| 保險費 | 保險費金額 | 25000 |
| 所得稅 | 所得稅金額 | 45000 |
| 實發薪資 | 實發薪資金額 | 335000 |
| 銀行轉帳 | 銀行轉帳金額 | 335000 |
| 現金支付 | 現金支付金額 | 0 |
| 備註 | 備註說明 | 6月份薪資單 |

### 3. 上傳CSV檔案

1. 點擊「選擇CSV檔案」按鈕
2. 選擇您準備好的CSV檔案
3. 系統會自動解析檔案內容
4. 查看數據預覽，確認資料正確

### 4. 編輯薪資項目

上傳成功後，您可以：

1. **批量保存**：直接保存所有CSV數據（多個月的薪資單）
2. **個別編輯**：點擊「編輯」按鈕來編輯特定月份的薪資單
   - 系統會自動將CSV數據轉換為薪資項目格式
   - 您可以修改項目名稱和金額
   - 可以添加或刪除薪資項目

### 5. 數據轉換規則

系統會自動將CSV數據轉換為薪資項目：

#### 收入項目
- 基本薪資 → 收入項目
- 津貼 → 收入項目

#### 扣除項目
- 所得稅 → 扣除項目
- 保險費 → 扣除項目
- 扣除額 → 扣除項目

## 使用場景

### 個人使用者
- 上傳自己的薪資單（單一員工）
- 可以上傳多個月的薪資單（每行一個月）
- 適合個人薪資管理

### 未來企業整合
- 企業薪資系統透過API直接傳送資料
- 支援批量上傳所有員工的薪資資料
- 自動化薪資資料管理

## 注意事項

### 檔案格式要求
- 檔案格式：CSV
- 編碼：UTF-8
- 分隔符：逗號 (,)
- 第一行必須是標題行

### 數據驗證
- 金額欄位必須是數字
- 日期格式必須是 YYYY-MM-DD
- 必填欄位不能為空
- 每行代表一個月的薪資單

### 隱私保護
- 只上傳您自己的薪資資料
- 系統不會要求其他員工的薪資資訊
- 資料僅用於個人薪資分析

### 錯誤處理
- 如果檔案格式不正確，系統會顯示錯誤訊息
- 如果數據有問題，系統會跳過該筆記錄
- 上傳成功後會顯示處理結果

## 範例CSV內容

```csv
公司名稱,員工編號,員工姓名,部門,薪資日期,工作天數,缺勤天數,有薪假天數,無薪假天數,基本薪資,津貼,總薪資,扣除額,保險費,所得稅,實發薪資,銀行轉帳,現金支付,備註
測試科技公司,EMP001,張小明,研發部,2024-06-30,22,0,0,0,400000,20000,420000,85000,25000,45000,335000,335000,0,6月份薪資單
測試科技公司,EMP001,張小明,研發部,2024-05-31,21,1,0,0,400000,18000,418000,83000,25000,44000,335000,335000,0,5月份薪資單
測試科技公司,EMP001,張小明,研發部,2024-04-30,20,2,0,0,400000,16000,416000,82000,25000,43000,334000,334000,0,4月份薪資單
```

## 故障排除

### 常見問題

1. **檔案無法上傳**
   - 檢查檔案格式是否為CSV
   - 檢查檔案編碼是否為UTF-8
   - 檢查檔案大小是否過大

2. **數據解析錯誤**
   - 檢查CSV格式是否正確
   - 檢查欄位名稱是否與範本一致
   - 檢查數據類型是否正確

3. **薪資項目顯示不正確**
   - 檢查金額欄位是否為數字
   - 檢查是否有空值或無效數據
   - 使用「編輯」功能手動調整

### 聯繫支援

如果遇到問題，請：
1. 檢查瀏覽器控制台的錯誤訊息
2. 確認後端服務器正在運行
3. 檢查網路連接狀態

## 未來功能規劃

### API整合
- 與企業薪資系統API對接
- 自動化薪資資料同步
- 支援多種薪資系統格式

### 批量處理
- 企業可批量上傳所有員工薪資
- 自動化薪資資料驗證
- 支援薪資資料匯出
